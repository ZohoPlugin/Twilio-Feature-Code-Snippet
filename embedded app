var ZOHO=function(){var b,f={};return{embeddedApp:{on:function(e,b){f[e]=b},init:function(){b=new ZSDK;var e,g=new Promise(function(b,c){e=b});b.OnLoad(function(){e()});for(var d in f)b.getContext().Event.Listen(d,f[d]);return g}},CRM:function(){function e(a){a.sdkVersion="1";return b.getContext().Event.Trigger("CRM_EVENT",a,!0)}function g(a,r,b,c){a={category:"CREATE",Entity:a,RelatedID:b,APIData:r};a.type=c||"RECORD";return e(a)}function d(a,b,c){return e({category:"READ",APIData:{Entity:a,RecordID:b,
RelatedList:c}})}function m(a,b,c){var d=void 0;if("CONNECTOR"!=c){c=b.url;var g=b.params,d=b.headers,m=b.body,u=b.PARTS,w=b.CONTENT_TYPE;b=b.FILE;if(!c)throw{Message:"Url missing"};if(g){var p,f=[];for(p in g)f.push(encodeURIComponent(p)+"\x3d"+encodeURIComponent(g[p]));p=f.join("\x26");c+=(-1<c.indexOf("?")?"\x26":"?")+p}d={url:c,Header:d,Body:m,CONTENT_TYPE:w,PARTS:u,FILE:b}}else d=b;return e({category:"CONNECTOR",nameSpace:a,data:d})}function c(a){$.extend(a,{category:"UI"});return e(a)}function f(a,
b){return e({category:"CONFIG",type:a,nameSpace:b})}function n(a){var b={category:"USER"};a.ID?b.ID=a.ID:a.Type&&(b.Type=a.Type);return e(b)}function k(a){return e({category:"META",type:a.type,Entity:a.Entity,Id:a.Id})}return{ACTION:{setConfig:function(a){return e({category:"ACTION",type:"CUSTOM_ACTION_SAVE_CONFIG",object:a})},enableAccountAccess:function(a){return e({category:"ACTION",type:"ENABLE_ACCOUNT_ACCESS",object:a})}},FUNCTIONS:{execute:function(a,b){var c={};c.data=b.PARAMS;return e({category:"FUNCTIONS_EXECUTE",
customFunctionName:a,data:c})}},CONFIG:{getOrgInfo:function(a){return f("ORG")},getCurrentUser:function(){return f("CURRENT_USER")}},META:{getFields:function(a){a.type="FIELD_LIST";return k(a)},getModules:function(){return k({type:"MODULE_LIST"})},getAssignmentRules:function(a){a.type="ASSIGNMENT_RULES";return k(a)},getLayouts:function(a){a.id=a.id?a.id:a.LayoutId;a.type=a.Id?"LAYOUT":"LAYOUTS";return k(a)},getRelatedList:function(a){a.type="RELATED_LIST";return k(a)},getCustomViews:function(a){a.type=
a.Id?"CUSTOM_VIEW":"CUSTOM_VIEWS";return k(a)}},API:{addNotes:function(a){return g(a.Entity,{data:[{Note_Title:a.Title,Note_Content:a.Content}]},a.RecordID,"NOTES")},addNotesAttachment:function(a){return e({category:"UPDATE",type:"NOTES",Entity:a.Entity,RecordID:a.RecordID,RelatedRecordID:a.RelatedRecordID,APIData:{Files:{FileName:File.Name,FileData:File.Content}}})},insertRecord:function(a){return g(a.Entity,a.APIData)},getRecord:function(a){return d(a.Entity,a.RecordID)},getAllRecords:function(a){return e({category:"READ",
APIData:a})},updateRecord:function(a){return e({category:"UPDATE",type:"RECORD",Entity:a.Entity,APIData:a.APIData})},deleteRecord:function(a){return e({category:"DELETE",type:"RECORD",Entity:a.Entity,RecordID:a.RecordID})},searchRecord:function(a){return e({category:"SEARCH",Entity:a.Entity,Type:a.Type,Query:a.Query,page:a.page,per_page:a.per_page})},getAllUsers:function(a){return n({Type:a.Type})},getUser:function(a){return n({ID:a.ID})},getRelatedRecords:function(a){return d(a.Entity,a.RecordID,
a.RelatedList)},updateRelatedRecords:function(a){return e({category:"UPDATE",type:"RELATED_RECORD",Entity:a.Entity,RecordID:a.RecordID,RelatedList:a.RelatedList,RelatedRecordID:a.RelatedRecordID,APIData:a.APIData})},delinkRelatedRecord:function(a){return e({category:"DELETE",type:"RELATED_RECORD",Entity:a.Entity,RecordID:a.RecordID,RelatedList:a.RelatedList,RelatedRecordID:a.RelatedRecordID})},attachFile:function(a){var b=a.Entity,c=a.RecordID;a=a.File;a={FileName:a.Name,FileData:a.Content};return g(b,
a,c,"ATTACHMENT")},getAllProfiles:function(a){return e({category:"PROFILES",type:"GET_ALL_PROFILES"})},getProfile:function(a){return e({category:"PROFILES",type:"GET_PROFILE",ID:a.ID})},updateProfile:function(a){return e({category:"UPDATE",type:"PROFILE",ID:a.ID,APIData:a.APIData})},getOrgVariable:function(a){return f("VARIABLE",a)}},UI:{Resize:function(a){a={action:"RESIZE",data:{width:a.width,height:a.height}};return c(a)},Dialer:{maximize:function(){return c({action:{telephony:"MAXIMIZE"}})},minimize:function(){return c({action:{telephony:"MINIMIZE"}})},
notify:function(){return c({action:{telephony:"NOTIFY"}})}},Record:{open:function(a){a={action:{record:"OPEN"},data:{Entity:a.Entity,RecordID:a.RecordID}};return c(a)},edit:function(a){a={action:{record:"EDIT"},data:{Entity:a.Entity,RecordID:a.RecordID}};return c(a)},create:function(a){a={action:{record:"CREATE"},data:{Entity:a.Entity,RecordID:a.RecordID}};return c(a)},populate:function(a){return c({action:{record:"POPULATE"},data:a})}},Popup:{close:function(){return c({action:{popup:"CLOSE"}})},
closeReload:function(){return c({action:{popup:"CLOSE_RELOAD"}})}}},HTTP:{get:function(a){return m("wget.get",a)},post:function(a){return m("wget.post",a)}},CONNECTOR:{invokeAPI:function(a,b){return m(a,b,"CONNECTOR")}},ZSIGN:{create:function(){return e({category:"ZSIGN",type:"CREATE"})}},CONNECTION:{invoke:function(a,b){var c={},d={};d.url=b.PARAMS.url;d.method=b.PARAMS.method;d.param_type=b.PARAMS.param_type;d.parameters=JSON.stringify(b.PARAMS.parameters);d.headers=JSON.stringify(b.PARAMS.headers);
c.data=d;return e({category:"CRM_CONNECTION",connectionName:a,data:c})}}}}()}}();var ZSDKUtil=function(b){function f(b){}function e(b){var c={};b=b||window.location.href;b.substr(b.indexOf("?")+1).split("\x26").forEach(function(b,d){var e=b.split("\x3d");c[e[0]]=e[1]});c.hasOwnProperty("serviceOrigin")&&(c.serviceOrigin=decodeURIComponent(c.serviceOrigin));return c}var g=e(),d;f.prototype.Info=function(){(b.isDevMode()||b.isLogEnabled())&&window.console.info.apply(null,arguments)};f.prototype.Error=function(){(b.isDevMode()||b.isLogEnabled())&&window.console.error.apply(null,
arguments)};b.GetQueryParams=e;b.isDevMode=function(){return g&&g.isDevMode};b.isLogEnabled=function(){return g&&g.isLogEnabled};b.getLogger=function(){d&&d instanceof f||(d=new f);return d};b.Sleep=function(b){for(var c=(new Date).getTime();c+b>(new Date).getTime(););};return b}(window.ZSDKUtil||{}),ZSDKMessageManager=function(b){function f(b){try{var c="string"===typeof b.data?JSON.parse(b.data):b.data}catch(B){c=b.data}var f=c.type,k=c.eventName;try{var h;if(!(h="SET_CONTEXT"===k)){var n=b.source,
l=b.origin;h=a.isAppRegistered()&&q===n&&t===l?!0:Error("Un-Authorized Message.")}if(h)switch(f){case "FRAMEWORK.EVENT":var A={SET_CONTEXT:e,UPDATE_CONTEXT:g,EVENT_RESPONSE:d,EVENT_RESPONSE_FAILURE:m}[c.eventName];A&&"function"===typeof A?A(b,c):ZSDKEventManager.NotifyEventListeners(a.AppContext,c.eventName,c.data);break;default:a.MessageInterceptor(b,c)}}catch(B){r.Error("[SDK.MessageHandler] \x3d\x3e ",B.stack)}}function e(b,c){q=window.parent;t=a.QueryParams.serviceOrigin;a.SetContext(c.data);
a.ExecuteLoadHandler()}function g(a,b){}function d(a,b){c(b.promiseid,!0,b.data)}function m(a,b){c(b.promiseid,!1,b.data)}function c(a,b,c){h.hasOwnProperty(a)&&(b?h[a].resolve(c):h[a].reject(c),h[a]=void 0,delete h[a])}function y(a){return new Promise(function(b,c){h[a]={resolve:b,reject:c,time:(new Date).getTime()}})}function n(b){"object"===typeof b&&(b.appOrigin=encodeURIComponent(k()));if(!q)throw Error("Parentwindow reference not found.");q.postMessage(b,a.QueryParams.serviceOrigin)}function k(){return window.location.protocol+
"//"+window.location.host+window.location.pathname}var a,r=ZSDKUtil.getLogger(),v=100,h={},q,t;b.Init=function(c,d){if(!c||"object"!==typeof c)throw Error("Invalid Context object passed");if(d&&"object"!==typeof d)throw Error("Invalid Configuration Passed to MessageManager");a=c;return f.bind(b)};b.RegisterApp=function(){var b={type:"SDK.EVENT",eventName:"REGISTER",appOrigin:encodeURIComponent(k())};window.parent.postMessage(b,a.QueryParams.serviceOrigin)};b.DERegisterApp=function(){var b={type:"SDK.EVENT",
eventName:"DEREGISTER",uniqueID:a.getUniqueID()};n(b)};b.SendRequest=function(b){if(!b||"object"!==typeof b)throw Error("Invalid Options passed");var c;c="Promise"+v++;b={type:"SDK.EVENT",eventName:"HTTP_REQUEST",uniqueID:a.getUniqueID(),time:(new Date).getTime(),promiseid:c,data:b};n(b);c=y(c);return c};b.TriggerEvent=function(b,c,d){if(!b)throw Error("Invalid Eventname : ",b);var e=d?"Promise"+v++:void 0;b={type:"SDK.EVENT",eventName:b,uniqueID:a.getUniqueID(),time:(new Date).getTime(),promiseid:e,
data:c};n(b);if(d)return y(e)};return b}(window.ZSDKMessageManager||{}),ZSDKEventManager=function(b){var f=ZSDKUtil.getLogger(),e={};b.AttachEventListener=function(b,d){"function"===typeof d&&(Array.isArray(e[b])||(e[b]=[]),e[b].push(d))};b.NotifyEventListeners=function(b,d,m){var c=d.match(/^\__[A-Za-z_]+\__$/gi);Array.isArray(c);if((c=e[d])&&Array.isArray(c))for(d=0;d<c.length;d++)c[d].call(b,m);else f.Info("Cannot find EventListeners for Event : ",d)};b.NotifyInternalEventHandler=function(b,d){var e=
d.eventName;"__APP_INIT__"===e?(b.SetContext(d.data),b.ExecuteLoadHandler()):"__APP_CONTEXT_UPDATE__"===e&&(b.UpdateContext(d.data),b.ExecuteContextUpdateHandler())};return b}(window.ZSDKEventManager||{});
function ZSDK(){function b(){"function"!==typeof h?x.Error("No OnLoad Handler provided to execute."):C?x.Error("OnLoad event already triggered."):(h.call(l,l),C=!0)}function f(){q.call(l,l)}function e(){return z}function g(a,b,c){return ZSDKMessageManager.TriggerEvent(a,b,c)}function d(a){x.Info("Setting AppContext data");var b=a&&a.model||{};isDevMode&&a.locale&&a.localeResource&&0===Object.keys(a.localeResource).length&&a.localeResource.constructor===Object&&a.locale&&n(a.locale);if("undefined"!==
typeof ZSDKModelManager){for(var c in b)ZSDKModelManager.AddModel(c,b[c]);l.Model=ZSDKModelManager.GetModelStore()}w=a.uniqueID;t=a.connectors;x.Info("App Connectors ",t);z=!0}function m(){return w}function c(a){}function y(){return t}function n(a){k("/app-translations/"+a+".json",function(a){p=JSON.parse(a);v()})}function k(a,b){var c=new XMLHttpRequest;c.open("GET",a,!1);c.onreadystatechange=function(){4==c.readyState&&"200"==c.status&&b(c.responseText)};c.send(null)}function a(a,b,c){for(var d=
"";d!=a;)d=a,a=a.replace(b,c);return a}function r(a,b){b=b.replace(/\[(\w+)\]/g,".$1");b=b.replace(/^\./,"");for(var c=b.split("."),d=0,e=c.length;d<e;++d){var f=c[d];if(f in a)a=a[f];else return}return a}function v(){var b=document.querySelectorAll("[data-i18n]"),c;for(c in b)if(b.hasOwnProperty(c)){var d=r(p,b[c].getAttribute("data-i18n"));if(!d)return!1;if(b[c].hasAttribute("data-options")){var e=JSON.parse(JSON.stringify(eval("("+b[c].getAttribute("data-options")+")"))),f=Object.keys(e),g;for(g in f)d=
a(d,"${"+f[g]+"}",e[f[g]])}b[c].innerHTML=d}}var h,q,t,u,w,p={},x=ZSDKUtil.getLogger(),z=!1,C=!1;this.isContextReady=!1;this.HelperContext={};this.isDevMode=!1;this.getContext=function(){return l};var l={Model:{},Event:{}};l.Event.Listen=function(a,b){ZSDKEventManager.AttachEventListener(a,b)};l.Event.Trigger=g;l.GetRequest=function(a){return ZSDKMessageManager.SendRequest(a)};l.QueryParams=u;l.Translate=function(b,c){var d="";b&&(d=r(p,b));if(!d)return!1;if(c){var e=JSON.parse(JSON.stringify(eval(c))),
f=Object.keys(e);for(b in f)d=a(d,"${"+f[b]+"}",e[f[b]])}return d};this.OnLoad=function(a){if("function"!==typeof a)throw Error("Invalid Function value is passed");h=a;z&&b()};this.OnUnLoad=function(a){};this.OnContextUpdate=function(a){q=a};(function(){u=ZSDKUtil.GetQueryParams();isDevMode=!!u.isDevMode;var a={};a.isDevMode=isDevMode;a.ExecuteLoadHandler=b;a.SetContext=d;a.UpdateContext=c;a.QueryParams=u;a.GetConnectors=y;a.TriggerEvent=g;a.ExecuteContextUpdateHandler=f;a.getUniqueID=m;a.isAppRegistered=
e;var h=ZSDKMessageManager.Init(a);window.addEventListener("message",h);window.addEventListener("unload",function(){ZSDKMessageManager.DERegisterApp()});"undefined"!==typeof ZSDKModelManager&&ZSDKModelManager.Init(a);ZSDKMessageManager.RegisterApp()})()};
